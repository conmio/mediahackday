package com.conmio.mediahackday.headlineimport com.conmio.mediahackday.HeadlineRepositoryimport groovyx.net.http.ContentType/** * Created with IntelliJ IDEA. * User: haren * Date: 10/5/13 * Time: 5:51 PM * To change this template use File | Settings | File Templates. */class InMemHeadlineRespository implements HeadlineRepository{    def grailsApplication    def httpService    List<Headline> getHeadlines() {        return prepareHeadlines(grailsApplication.config.afp4w.api.base.url)    }    List<Headline> getHeadlines(String channelId) {        return prepareHeadlines(grailsApplication.config.afp4w.api.base.url + "?what_iptc=" + grailsApplication.config.afp4w.api.IPTC.mapping.get(channelId))    }    private prepareHeadlines(String apiUrl) {        def resp = httpService.request(apiUrl, "POST", [type:ContentType.XML])        List<Headline> headlines = resp.NewsItem.NewsComponent.NewsComponent.collect { item -> new Headline(item) }        return headlines    }}
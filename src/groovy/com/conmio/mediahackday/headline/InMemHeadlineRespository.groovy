package com.conmio.mediahackday.headlineimport com.conmio.mediahackday.HeadlineRepositoryimport grails.plugins.rest.client.RestBuilder/** * Created with IntelliJ IDEA. * User: haren * Date: 10/5/13 * Time: 5:51 PM * To change this template use File | Settings | File Templates. */class InMemHeadlineRespository implements HeadlineRepository{    def grailsApplication    List<Headline> getHeadlines() {        return prepareHeadlines(grailsApplication.config.afp4w.api.base.url)    }    List<Headline> getHeadlines(String channelId) {        return prepareHeadlines(grailsApplication.config.afp4w.api.base.url + "?what_iptc=" + grailsApplication.config.afp4w.IPTC.mapping[channelId])    }    private static prepareHeadlines(String apiUrl) {        def resp = new RestBuilder().get(apiUrl)         println(apiUrl)        List<Headline> headlines = resp.xml.NewsItem.NewsComponent.NewsComponent.collect { item -> new Headline(item) }        return headlines    }}